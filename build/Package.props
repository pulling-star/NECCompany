<Project>

  <PropertyGroup>
    <MSBuildAllProjects>$(MSBuildAllProjects);$(MSBuildThisFileFullPath)</MSBuildAllProjects>
  </PropertyGroup>

  <PropertyGroup Condition="'$(APPVEYOR)' == 'true'">
    <GitBranch Condition="'$(APPVEYOR_REPO_BRANCH)' != ''">$([System.Text.RegularExpressions.Regex]::Replace($(APPVEYOR_REPO_BRANCH), "[^0-9A-Za-z]", "-"))</GitBranch>
    <GitTag Condition="'$(APPVEYOR_REPO_TAG)' == 'true'">$(APPVEYOR_REPO_TAG_NAME)</GitTag>
    <IsGitPullRequest Condition="'$(APPVEYOR_PULL_REQUEST_NUMBER)' != ''">true</IsGitPullRequest>
    <IsGitBranch Condition="'$(GitBranch)' != '' and '$(GitBranch)' != 'master'">true</IsGitBranch>
    <IsStableRelease Condition="'$(GitTag)' != '' and !$(GitTag.Contains('-'))">true</IsStableRelease>
    <IsPreviewRelease Condition="'$(GitTag)' != '' and $(GitTag.Contains('-'))">true</IsPreviewRelease>
  </PropertyGroup>

  <PropertyGroup Condition="'$(CIRCLECI)' == 'true'">
    <GitBranch Condition="'$(CIRCLE_BRANCH)' != ''">$([System.Text.RegularExpressions.Regex]::Replace($(CIRCLE_BRANCH), "[^0-9A-Za-z]", "-"))</GitBranch>
    <GitTag Condition="'$(CIRCLE_TAG)' != ''">$(CIRCLE_TAG)</GitTag>
    <IsGitPullRequest Condition="'$(CIRCLE_PR_NUMBER)' != ''">true</IsGitPullRequest>
    <IsGitBranch Condition="'$(GitBranch)' != '' and '$(GitBranch)' != 'master'">true</IsGitBranch>
    <IsStableRelease Condition="'$(GitTag)' != '' and !$(GitTag.Contains('-'))">true</IsStableRelease>
    <IsPreviewRelease Condition="'$(GitTag)' != '' and $(GitTag.Contains('-'))">true</IsPreviewRelease>
  </PropertyGroup>

  <PropertyGroup>
    <IsGitPullRequest Condition="'$(IsGitPullRequest)' == ''">false</IsGitPullRequest>
    <IsGitBranch Condition="'$(IsGitBranch)' == ''">false</IsGitBranch>
    <IsStableRelease Condition="'$(IsStableRelease)' == ''">false</IsStableRelease>
    <IsPreviewRelease Condition="'$(IsPreviewRelease)' == ''">false</IsPreviewRelease>
  </PropertyGroup>

  <PropertyGroup>
    <IsPackable Condition="'$(IsGitPullRequest)' == 'true'">false</IsPackable>
    <IsPackable Condition="'$(IsGitBranch)' == 'true'">false</IsPackable>
    <Version Condition="'$(Version)' == '' and '$(GitTag)' != ''">$(GitTag)</Version>
    <Version Condition="'$(Version)' == '' and '$(IsGitBranch)' == 'true'">$([System.DateTime]::UtcNow.ToString(y.M.0'-alpha-'ddHHmm))-$(GitBranch)</Version>
    <Version Condition="'$(Version)' == ''">$([System.DateTime]::UtcNow.ToString(y.M.0'-alpha-'ddHHmm))</Version>
    <Authors>Klaus Hartke</Authors>
    <Copyright>&#169; $([System.DateTime]::UtcNow.ToString(yyyy)) Klaus Hartke</Copyright>
    <PackageRequireLicenseAcceptance>True</PackageRequireLicenseAcceptance>
    <PackageReleaseNotes>https://nsec.rocks/releases</PackageReleaseNotes>
    <PackageLicenseUrl>https://nsec.rocks/license</PackageLicenseUrl>
    <PackageProjectUrl>https://nsec.rocks/</PackageProjectUrl>
    <PackageIconUrl>https://goo.gl/iN8fpR</PackageIconUrl>
    <MinClientVersion>4.0</MinClientVersion>
  </PropertyGroup>

  <ItemGroup>
    <Content Include="$(MSBuildThisFileDirectory)..\LICENSE" PackagePath="" Visible="false" />
    <Content Include="$(MSBuildThisFileDirectory)..\NOTICE" PackagePath="" Visible="false" />
  </ItemGroup>

</Project>